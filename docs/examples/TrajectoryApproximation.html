<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Trajectory Approximation &#8212; pyscan 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.6/cosmo/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Trajectory Partial Scanning" href="TrajectoryPartialScanning.html" />
    <link rel="prev" title="Region Scanning Part 2" href="RegionScanningCont.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/NetRange.png"></span>
          pyscan</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../installation.html">Installation</a></li>
                <li><a href="../api.html">API</a></li>
                <li><a href="../examples.html">Examples</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">Api</a></li>
<li class="toctree-l1"><a class="reference internal" href="../point.html">Point</a></li>
<li class="toctree-l1"><a class="reference internal" href="../range.html">Ranges</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trajectory.html">Trajectory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trajectory.html#trajectory-simplification">Trajectory Simplification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trajectory.html#trajectories-to-points">Trajectories to Points</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scanning.html">Scanning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scanning.html#labeled-scanning">Labeled Scanning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_utility.html">Utility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="BasicExample.html">Planting Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="PhillyCrime.html">Philadelphia Crime Data Example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="PhillyCrime.html#Reading-the-Data">Reading the Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="PhillyCrime.html#Subsampling">Subsampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="PhillyCrime.html#Disk-Scanning">Disk Scanning</a></li>
<li class="toctree-l2"><a class="reference internal" href="PhillyCrime.html#Rectangle-Scanning">Rectangle Scanning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="RegionSimplification.html">Region Simplification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="RegionSimplification.html#Halfplane-Compression">Halfplane Compression</a></li>
<li class="toctree-l2"><a class="reference internal" href="RegionSimplification.html#Disk(or-Rectangle)-Compression">Disk(or Rectangle) Compression</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="RegionScanning.html">Region Scanning</a></li>
<li class="toctree-l1"><a class="reference internal" href="RegionScanningCont.html">Region Scanning Part 2</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Trajectory Approximation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Halfplane-Compression">Halfplane Compression</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Disk(or-Rectangle)-Compression">Disk(or Rectangle) Compression</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="TrajectoryPartialScanning.html">Trajectory Partial Scanning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="TrajectoryPartialScanning.html#Halfplane-Partial-Scanning">Halfplane Partial Scanning</a></li>
<li class="toctree-l2"><a class="reference internal" href="TrajectoryPartialScanning.html#Disk-Partial-Scanning">Disk Partial Scanning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="TrajectoryFullScanning.html">Trajectory Full Scanning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="TrajectoryFullScanning.html#Halfplane-Scanning">Halfplane Scanning</a></li>
<li class="toctree-l2"><a class="reference internal" href="TrajectoryFullScanning.html#Disk-Scanning">Disk Scanning</a></li>
<li class="toctree-l2"><a class="reference internal" href="TrajectoryFullScanning.html#Rectangle-Scanning">Rectangle Scanning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sss.html">Spatial scan statistics: approximations and performance study</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Trajectory Approximation</a><ul>
<li><a class="reference internal" href="#Halfplane-Compression">Halfplane Compression</a><ul>
<li><a class="reference internal" href="#Convex-Hull">Convex Hull</a></li>
<li><a class="reference internal" href="#Directional-Hull">Directional Hull</a></li>
<li><a class="reference internal" href="#DP-Simplification">DP Simplification</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Disk(or-Rectangle)-Compression">Disk(or Rectangle) Compression</a><ul>
<li><a class="reference internal" href="#Grid-Directional-Kernel">Grid Directional Kernel</a></li>
<li><a class="reference internal" href="#Lifting-Kernel">Lifting Kernel</a></li>
<li><a class="reference internal" href="#Gridding-Methods">Gridding Methods</a></li>
<li><a class="reference internal" href="#Even-Simplification">Even Simplification</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 9ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }
</style>
<div class="section" id="Trajectory-Approximation">
<h1>Trajectory Approximation<a class="headerlink" href="#Trajectory-Approximation" title="Permalink to this headline">¶</a></h1>
<p>These methods can be used to simplify trajectories as a preprocessing
step before they are fed to labeled region scanning methods.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pyscan</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="kn">import</span> <span class="nn">statistics</span>

<span class="k">def</span> <span class="nf">plot_points</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pts</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="n">xs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">ys</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">pts</span><span class="p">:</span>
        <span class="n">xs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
        <span class="n">ys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">plot_points_traj</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pts</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="n">xs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">ys</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">pts</span><span class="p">:</span>
        <span class="n">xs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">ys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">plot_approx</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">traj_pts</span><span class="p">,</span> <span class="n">core_set_pts</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="o">-.</span><span class="mi">01</span><span class="p">,</span> <span class="mf">1.01</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-.</span><span class="mi">01</span><span class="p">,</span> <span class="mf">1.01</span><span class="p">])</span>
    <span class="n">plot_points_traj</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">traj_pts</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">)</span>
    <span class="n">plot_points</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">core_set_pts</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>




<span class="n">pts</span> <span class="o">=</span> <span class="p">[</span><span class="n">pyscan</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span>
        <span class="p">(</span><span class="mf">0.28076897884325597</span><span class="p">,</span> <span class="mf">0.5709315642759948</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.2883670662212526</span><span class="p">,</span> <span class="mf">0.5731789009659035</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.2804742254535915</span><span class="p">,</span> <span class="mf">0.5708019102361805</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.28057247658348744</span><span class="p">,</span> <span class="mf">0.5704993841433011</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.2807034780899998</span><span class="p">,</span> <span class="mf">0.5714501804351904</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.2734656448549006</span><span class="p">,</span> <span class="mf">0.5746699224236597</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.2902993384423915</span><span class="p">,</span> <span class="mf">0.5749940575231799</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3078862906923401</span><span class="p">,</span> <span class="mf">0.5769820861334908</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.30896705312110206</span><span class="p">,</span> <span class="mf">0.5969488082632861</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.32072443833104086</span><span class="p">,</span> <span class="mf">0.5964301921040598</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3307133032029929</span><span class="p">,</span> <span class="mf">0.5930375780625253</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.34640073360844237</span><span class="p">,</span> <span class="mf">0.5890183028286218</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.35494858190868855</span><span class="p">,</span> <span class="mf">0.588802212762275</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3610729023383628</span><span class="p">,</span> <span class="mf">0.5883916416362222</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.36329992794916616</span><span class="p">,</span> <span class="mf">0.5732869459990769</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.37201152813256444</span><span class="p">,</span> <span class="mf">0.5787108066642039</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.37682583349709176</span><span class="p">,</span> <span class="mf">0.5840266222961576</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3765310801074273</span><span class="p">,</span> <span class="mf">0.5862307409728461</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.37640007860089164</span><span class="p">,</span> <span class="mf">0.5878730254770267</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3764328289775314</span><span class="p">,</span> <span class="mf">0.5880675065367327</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.37649832973078756</span><span class="p">,</span> <span class="mf">0.5883700326295813</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.37649832973078756</span><span class="p">,</span> <span class="mf">0.5889750848153402</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3765310801074273</span><span class="p">,</span> <span class="mf">0.5894504829612848</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3765310801074273</span><span class="p">,</span> <span class="mf">0.5894504829612848</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3765310801074273</span><span class="p">,</span> <span class="mf">0.5894504829612848</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3766293312372999</span><span class="p">,</span> <span class="mf">0.5896017460077398</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3771533372633727</span><span class="p">,</span> <span class="mf">0.5939019383278819</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3775135914062933</span><span class="p">,</span> <span class="mf">0.6018324437625461</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3605816466889298</span><span class="p">,</span> <span class="mf">0.610000648270198</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.34266719067270024</span><span class="p">,</span> <span class="mf">0.6244570737083028</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3384096417108854</span><span class="p">,</span> <span class="mf">0.6261857942390467</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3402764131787448</span><span class="p">,</span> <span class="mf">0.6249972988741699</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.36012314141611323</span><span class="p">,</span> <span class="mf">0.6221881280117534</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3730922905613496</span><span class="p">,</span> <span class="mf">0.638567755040308</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.37581057182156274</span><span class="p">,</span> <span class="mf">0.6664649826047369</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3776773432894454</span><span class="p">,</span> <span class="mf">0.6949456533483143</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.38265540053710156</span><span class="p">,</span> <span class="mf">0.7206603712427262</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.3997510971376172</span><span class="p">,</span> <span class="mf">0.7241826393240749</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.42909543459750465</span><span class="p">,</span> <span class="mf">0.7243339023704993</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.43620226632606823</span><span class="p">,</span> <span class="mf">0.7361540289992835</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.43679177310539713</span><span class="p">,</span> <span class="mf">0.7557750070229177</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.4369882753651657</span><span class="p">,</span> <span class="mf">0.7778810208094789</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.4371520272483178</span><span class="p">,</span> <span class="mf">0.7831752274347917</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.43662802122224503</span><span class="p">,</span> <span class="mf">0.7839963696868667</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.4390187987161772</span><span class="p">,</span> <span class="mf">0.7933962875726462</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.4388222964564087</span><span class="p">,</span> <span class="mf">0.809970395660907</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.4382982904303359</span><span class="p">,</span> <span class="mf">0.8370032629599792</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.4391825505993293</span><span class="p">,</span> <span class="mf">0.8585690515807041</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.4399030588851706</span><span class="p">,</span> <span class="mf">0.8777146314583937</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.4402305626514748</span><span class="p">,</span> <span class="mf">0.8978758346478641</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.44091832056067637</span><span class="p">,</span> <span class="mf">0.9170862415454762</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.43639876858583676</span><span class="p">,</span> <span class="mf">0.925729844199042</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.4386912949498963</span><span class="p">,</span> <span class="mf">0.9279555718823406</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.43878954607976894</span><span class="p">,</span> <span class="mf">0.9269183395639188</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.43875679570315246</span><span class="p">,</span> <span class="mf">0.9269399485705596</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.43875679570315246</span><span class="p">,</span> <span class="mf">0.9269615575772004</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.43872404532651277</span><span class="p">,</span> <span class="mf">0.9269831665838106</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.43872404532651277</span><span class="p">,</span> <span class="mf">0.9270263845970922</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.43872404532651277</span><span class="p">,</span> <span class="mf">0.9269183395639188</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.43878954607976894</span><span class="p">,</span> <span class="mf">0.9269399485705596</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.4388550468330484</span><span class="p">,</span> <span class="mf">0.9274153467165043</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.43675902272875744</span><span class="p">,</span> <span class="mf">0.9279987898956222</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.4359402633130202</span><span class="p">,</span> <span class="mf">0.9259675432720297</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.2562716971245123</span><span class="p">,</span> <span class="mf">0.37042159171941874</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.2562716971245123</span><span class="p">,</span> <span class="mf">0.4148497093588573</span><span class="p">))]</span>


<span class="n">alpha</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">20</span>
</pre></div>
</div>
</div>
<div class="section" id="Halfplane-Compression">
<h2>Halfplane Compression<a class="headerlink" href="#Halfplane-Compression" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Convex-Hull">
<h3>Convex Hull<a class="headerlink" href="#Convex-Hull" title="Permalink to this headline">¶</a></h3>
<p>This method takes the convex hull of the trajectory. Since points
internal to the convex hull will not effect halfplane labeled scanning
we can do this as a preprocessing step to speed up the scanning without
effecting the spatial error.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">f</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">core_set_pts</span> <span class="o">=</span> <span class="n">pyscan</span><span class="o">.</span><span class="n">hull</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>
<span class="n">plot_approx</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pts</span><span class="p">,</span> <span class="n">core_set_pts</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_TrajectoryApproximation_3_0.png" src="../_images/examples_TrajectoryApproximation_3_0.png" />
</div>
</div>
</div>
<div class="section" id="Directional-Hull">
<h3>Directional Hull<a class="headerlink" href="#Directional-Hull" title="Permalink to this headline">¶</a></h3>
<p>This method uses an approximation of the convex hull to simplify the
trajectory even more. The spatial error is bounded by alpha. In practice
this method can reduce the number of points needed significantly over
just taking the convex hull, and therefore speed up halplane labeled
scanning even more than the previous method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">f</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">core_set_pts</span> <span class="o">=</span> <span class="n">pyscan</span><span class="o">.</span><span class="n">halfplane_kernel</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>
<span class="n">plot_approx</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pts</span><span class="p">,</span> <span class="n">core_set_pts</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_TrajectoryApproximation_5_0.png" src="../_images/examples_TrajectoryApproximation_5_0.png" />
</div>
</div>
</div>
<div class="section" id="DP-Simplification">
<h3>DP Simplification<a class="headerlink" href="#DP-Simplification" title="Permalink to this headline">¶</a></h3>
<p>This is the popular Douglas Peucker trajectory simplification algorithm.
It has the same error guarantees as the Directional Hull method, but
usually produces a larger number of points per trajectory.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">f</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">core_set_pts</span> <span class="o">=</span> <span class="n">pyscan</span><span class="o">.</span><span class="n">dp_compress</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>
<span class="n">plot_approx</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pts</span><span class="p">,</span> <span class="n">core_set_pts</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_TrajectoryApproximation_7_0.png" src="../_images/examples_TrajectoryApproximation_7_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="Disk(or-Rectangle)-Compression">
<h2>Disk(or Rectangle) Compression<a class="headerlink" href="#Disk(or-Rectangle)-Compression" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Grid-Directional-Kernel">
<h3>Grid Directional Kernel<a class="headerlink" href="#Grid-Directional-Kernel" title="Permalink to this headline">¶</a></h3>
<p>The grid directional kernel preserves the spatial error with respect to
disks of a certain minimum radius. Increasing the minimum radius
significantly decreases the number of points needed to approximate the
trajectory and approaches the halfplane method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">min_r</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span> <span class="o">/</span> <span class="mi">10</span><span class="p">]:</span>
    <span class="n">chord_l</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">min_r</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">alpha</span><span class="p">)</span>
    <span class="n">core_set_pts</span> <span class="o">=</span> <span class="n">pyscan</span><span class="o">.</span><span class="n">grid_direc_kernel</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">chord_l</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>
    <span class="n">plot_approx</span><span class="p">(</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">pts</span><span class="p">,</span> <span class="n">core_set_pts</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Grid Directional </span><span class="si">%f</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">min_r</span><span class="p">,))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_TrajectoryApproximation_9_0.png" src="../_images/examples_TrajectoryApproximation_9_0.png" />
</div>
</div>
</div>
<div class="section" id="Lifting-Kernel">
<h3>Lifting Kernel<a class="headerlink" href="#Lifting-Kernel" title="Permalink to this headline">¶</a></h3>
<p>This lifts the trajectory onto the surface of a paraboloid and then
takes a 3d approximate directional kernel in this space. This method
currently has issues with stability.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">f</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">core_set_pts</span> <span class="o">=</span> <span class="n">pyscan</span><span class="o">.</span><span class="n">lifting_kernel</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>
<span class="n">plot_approx</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pts</span><span class="p">,</span> <span class="n">core_set_pts</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_TrajectoryApproximation_11_0.png" src="../_images/examples_TrajectoryApproximation_11_0.png" />
</div>
</div>
</div>
<div class="section" id="Gridding-Methods">
<h3>Gridding Methods<a class="headerlink" href="#Gridding-Methods" title="Permalink to this headline">¶</a></h3>
<p>These methods grid the trajectory in various ways using a 1 / alpha x 1
/ alpha grid. They tend to use far more points then the previous
methods.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">f</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">core_set_pts</span> <span class="o">=</span> <span class="n">pyscan</span><span class="o">.</span><span class="n">grid_trajectory</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>
<span class="n">plot_approx</span><span class="p">(</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pts</span><span class="p">,</span> <span class="n">core_set_pts</span><span class="p">)</span>
<span class="n">core_set_pts</span> <span class="o">=</span> <span class="n">pyscan</span><span class="o">.</span><span class="n">grid_kernel</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>
<span class="n">plot_approx</span><span class="p">(</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pts</span><span class="p">,</span> <span class="n">core_set_pts</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_TrajectoryApproximation_13_0.png" src="../_images/examples_TrajectoryApproximation_13_0.png" />
</div>
</div>
</div>
<div class="section" id="Even-Simplification">
<h3>Even Simplification<a class="headerlink" href="#Even-Simplification" title="Permalink to this headline">¶</a></h3>
<p>Just takes points evenly along the length of the trajectory. This is a
nice general method which can be used as a basis for other methods.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">f</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">core_set_pts</span> <span class="o">=</span> <span class="n">pyscan</span><span class="o">.</span><span class="n">even_sample_error</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">plot_approx</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pts</span><span class="p">,</span> <span class="n">core_set_pts</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_TrajectoryApproximation_15_0.png" src="../_images/examples_TrajectoryApproximation_15_0.png" />
</div>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/examples/TrajectoryApproximation.ipynb.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2019, Michael Matheny.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.<br/>
    </p>
  </div>
</footer>
  </body>
</html>